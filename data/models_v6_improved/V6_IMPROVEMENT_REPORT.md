# V6 Model Improvement Report
**Date:** 2026-02-14

## Executive Summary

Completed V6 model improvement batch with the following achievements:
- **SPX500_USD**: Major improvement with 24h horizon (WF acc: 0.498 → 0.557) ✅
- **XRP_USDT**: Near-stable performance (std=0.046, threshold=0.04) ✅
- **Stocks**: Successfully trained AAPL, MSFT, GOOGL with 8h horizon ✅
- **BTC_USDT**: Still needs work (high variance persists) ⚠️

---

## Before vs After Comparison

### Crypto Assets (3h horizon)

| Symbol | Before WF Acc | After WF Acc | Before Std | After Std | Change |
|--------|---------------|--------------|------------|-----------|--------|
| BTC_USDT | 0.5137 | 0.4929 | 0.071 | 0.076 | ❌ -2.1% |
| XRP_USDT | 0.5607 | 0.5562 | 0.050 | 0.046 | ✅ More stable |

### Indices (12h → 24h horizon)

| Symbol | Before WF Acc | After WF Acc | Before Std | After Std | Change |
|--------|---------------|--------------|------------|-----------|--------|
| SPX500_USD | 0.4976 | 0.5567 | N/A | 0.112 | ✅ +5.9% |

### Stocks (8h horizon) - NEW

| Symbol | Test Acc | HC Acc | WF Acc | WF Std | Status |
|--------|----------|--------|--------|--------|--------|
| AAPL | 0.5192 | 0.5117 | 0.5325 | 0.051 | ✅ New |
| MSFT | 0.4578 | 0.4640 | 0.5477 | 0.098 | ✅ New |
| GOOGL | 0.5237 | 0.5201 | 0.5309 | 0.107 | ✅ New |
| TSLA | 0.5685 | 0.5705 | 0.5511 | 0.038 | ✅ Stable |

---

## Data Improvements

| Symbol | Before Bars | After Bars | Improvement |
|--------|-------------|------------|-------------|
| BTC_USDT | ~1,100 | 17,520 | 15x more data |
| XRP_USDT | ~1,400 | 17,520 | 12x more data |
| ETH_USDT | ~1,000 | 17,520 | 17x more data |
| Stocks | N/A | 3,490 each | New data |
| VIX | N/A | 3,496 | Available for features |

---

## Detailed Results

### BTC_USDT (Needs Work)
- **Problem**: Walk-forward shows high variance (std=0.076)
- **Best fold**: 63.5% accuracy
- **Worst fold**: 33.3% accuracy (severe)
- **Recommendation**: 
  - Try 6h or 12h horizon instead of 3h
  - Consider ensemble of multiple models with different seeds
  - Add cross-asset features (ETH correlation)

### XRP_USDT (Near Stable!)
- **Walk-forward**: 55.6% avg accuracy
- **Standard deviation**: 0.046 (threshold for stable is 0.04)
- **High-confidence accuracy**: 56.6% @ 58% threshold
- **Status**: Very close to production-ready

### SPX500_USD (Major Success!)
- **24h horizon** dramatically improved results
- **Best folds**: 71.1% and 73.6% accuracy
- **Walk-forward improvement**: +5.9 percentage points
- **Key features**: range_24h, volatility_regime, ret_72h

### Stocks (8h Horizon Working)
All three new stocks show >53% walk-forward accuracy:
- **AAPL**: Conservative, steady performance
- **MSFT**: High variance but strong peaks (72.6% fold)
- **GOOGL**: Similar pattern to AAPL

---

## Configuration Changes Made

```python
# SPX500_USD: Changed from 12h to 24h horizon
"SPX500_USD": {
    "horizon": 24,      # was 12
    "min_move": 0.005,  # was 0.006
    "vol_mult": 0.35,   # was 0.4
    "n_optuna": 80      # was 50
}
```

---

## Files Created

- `AAPL_binary_ensemble_v6.pkl`
- `MSFT_binary_ensemble_v6.pkl`
- `GOOGL_binary_ensemble_v6.pkl`
- `SPX500_USD_binary_ensemble_v6.pkl` (updated)
- `BTC_USDT_binary_ensemble_v6.pkl` (updated)
- `XRP_USDT_binary_ensemble_v6.pkl` (updated)
- `fetch_training_data_v2.py` (enhanced data fetcher)

---

## Recommendations

### Immediate Actions
1. **Deploy XRP model** - Nearly stable, best crypto candidate
2. **Use SPX500 24h model** - Significant improvement
3. **Monitor TSLA** - Already stable and performing well

### Further Investigation
1. **BTC**: Try longer horizons (6h, 12h) or ensemble smoothing
2. **VIX features**: Add VIX as feature for SPX500 predictions
3. **Cross-validation**: Implement time-series cross-validation for stocks

---

## Model Performance Summary

| Symbol | Asset | Horizon | WF Acc | Stable | Production Ready |
|--------|-------|---------|--------|--------|------------------|
| TSLA | Stock | 8h | 55.1% | ✅ Yes | ✅ Yes |
| XRP_USDT | Crypto | 3h | 55.6% | Almost | ⚠️ Close |
| SPX500_USD | Index | 24h | 55.7% | No | ⚠️ Monitor |
| MSFT | Stock | 8h | 54.8% | No | ⚠️ High variance |
| AAPL | Stock | 8h | 53.3% | Almost | ⚠️ Close |
| GOOGL | Stock | 8h | 53.1% | No | ⚠️ High variance |
| BTC_USDT | Crypto | 3h | 49.3% | No | ❌ Needs work |

---

*Report generated by V6 Improvement Batch Training Pipeline*
